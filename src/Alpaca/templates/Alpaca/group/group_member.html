{% extends './_group-layout.html' %}
{% load i18n %}

{% block user_options %}    
    {% if user in group.pending_members.all %}
        <p>{% trans "The admins of this group have received your request to join!" %}</p>
    {% elif user in group.member_list.all %}
        <form action="leave/{{group.id}}" method="POST">
            {% csrf_token %}
            <input class="al-btn-action-big" type="submit" name="leave_group" value="{% trans 'Leave' %}"/>
        </form>
    {% else %}
        <form action="join/{{group.id}}" method="POST">
            {% csrf_token %}
            <input class="al-btn-action-big" type="submit" name="join_group" value="{% trans 'Join!' %}"/>
        </form>
    {% endif %}
{% endblock %}

{% block admin_list %}
    <div class="al-group-member-list">  
        <a class="al-icon-user" href="{% url 'alpaca:profile' group.superuser.username %}">{{ group.superuser.username }}</a>
        {% for admin in group.admin_list.all %}
            <a class="al-icon-user" href="{% url 'alpaca:profile' admin.username %}">{{ admin.username }}</a>
        {% endfor %}
    </div>
{% endblock %}

{% block member_list %}
    {% if group.member_list.count <= 0 %}
        <p>{% trans "There are no other members in this group!" %}</p>
    {% else %}  
        <div class="al-group-member-list">  
            {% for member in group.member_list.all %}
                <a class="al-icon-user" href="{% url 'alpaca:profile' member.username %}">{{ member.username }}</a>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}